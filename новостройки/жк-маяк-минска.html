<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ЖК Маяк Минска | Новостройки Минска | Fattoria.by</title>
  <meta name="description" content="ЖК Маяк Минска - эко-комплекс в Минске. 1-3 комнатные квартиры рядом с лесом и чистым воздухом.">
  <meta name="keywords" content="ЖК Маяк Минска, новостройки Минск, купить квартиру, жилой комплекс">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Основные стили -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/project-detail.css">
</head>
<body>
  <!-- Header -->
  <div id="header-placeholder"></div>

  <!-- Hero Section -->
  <section class="project-hero">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-6">
          <h1>ЖК Маяк Минска</h1>
          <p class="lead">Национальной библиотекой </p>
          <div class="project-meta">
            <span class="badge bg-warning text-dark me-2">Сдан</span>
            <span class="location"><i class="fas fa-map-marker-alt"></i> Минск, ул. Мстиславца</span>
          </div>
        </div>
        <div class="col-lg-6">
          <img src="../фото/м1.png" alt="ЖК Маяк Минска" class="img-fluid rounded">
        </div>
      </div>
    </div>
  </section>

  <!-- Project Details -->
  <section class="project-details">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <!-- Gallery -->
          <div class="project-gallery mb-5">
            <div class="row g-3">
              <div class="col-md-6">
                <img src="../фото/м1.png" alt="ЖК Маяк Минска" class="img-fluid rounded">
              </div>
              <div class="col-md-6">
                <img src="../фото/м2.png" alt="ЖК Маяк Минска" class="img-fluid rounded">
              </div>
            </div>
          </div>

          <!-- Description -->
          <div class="project-description mb-5">
            <h2>О комплексе</h2>
            <p>ЖК «Маяк Минска» — это современный многофункциональный комплекс в престижном районе Минска рядом с Национальной библиотекой и станцией метро «Восток». Он включает жилые дома переменной этажности, торговый центр Dana Mall, благоустроенные набережные и развитую инфраструктуру с магазинами, кафе, школами и детскими садами.</p>
            <p>Все квартиры сдаются с полной чистовой отделкой, что позволяет заселиться сразу после получения ключей. В комплексе предусмотрены все необходимые коммуникации и инфраструктура.</p>
          </div>

          <!-- Features -->
          <div class="project-features mb-5">
            <h2>Особенности комплекса</h2>
            <div class="row">
              <div class="col-md-6">
                <ul class="feature-list">
                  <li><i class="fas fa-check text-success"></i> Экологичное расположение</li>
                  <li><i class="fas fa-check text-success"></i> Чистый воздух</li>
                  <li><i class="fas fa-check text-success"></i> Современные материалы</li>
                </ul>
              </div>
              <div class="col-md-6">
                <ul class="feature-list">
                  <li><i class="fas fa-check text-success"></i> Детские площадки</li>
                  <li><i class="fas fa-check text-success"></i> Парковочные места</li>
                  <li><i class="fas fa-check text-success"></i> Видеонаблюдение</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Infrastructure -->
          <div class="project-infrastructure mb-5">
            <h2>Инфраструктура района</h2>
            <div class="infrastructure-grid">
              <div class="infra-item">
                <i class="fas fa-school"></i>
                <span>Школы и детские сады</span>
              </div>
              <div class="infra-item">
                <i class="fas fa-shopping-cart"></i>
                <span>Торговые центры</span>
              </div>
              <div class="infra-item">
                <i class="fas fa-hospital"></i>
                <span>Медицинские учреждения</span>
              </div>
              <div class="infra-item">
                <i class="fas fa-tree"></i>
                <span>Парки и зоны отдыха</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
          <!-- Contact Form -->
          <div class="contact-card sticky-top">
            <h3>Заинтересованы в ЖК Маяк Минска?</h3>
            <p>Оставьте заявку и получите подробную информацию</p>
            <form id="projectContactForm">
              <div class="mb-3">
                <input type="text" class="form-control" name="name" placeholder="Ваше имя" required>
              </div>
              <div class="mb-3">
                <input type="tel" class="form-control" name="phone" placeholder="Телефон" required>
              </div>
              <div class="mb-3">
                <input type="email" class="form-control" name="email" placeholder="Email">
              </div>
              <div class="mb-3">
                <textarea class="form-control" name="message" rows="3" placeholder="Какая квартира вас интересует?"></textarea>
              </div>
              <button type="submit" class="btn btn-warning w-100">
                <i class="fas fa-paper-plane me-2"></i>Отправить заявку
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <div id="footer-placeholder"></div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="/js/load-components.js" defer></script>
  <script src="/js/forms.js" defer></script>
  <script src="/js/toast.js" defer></script>

  <script>
    // Handle form submission
    document.getElementById('projectContactForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const form = e.target;
      const formData = new FormData(form);
      const name = form.querySelector('input[type="text"]');
      const phone = form.querySelector('input[type="tel"]');
      const email = form.querySelector('input[type="email"]');
      const message = form.querySelector('textarea');

      const nameValue = name.value.trim();
      const phoneValue = phone.value.trim();
      const emailValue = email.value.trim();
      const messageValue = message.value.trim();

      // Validation
      if (!nameValue) {
        alert('Пожалуйста, укажите ваше имя');
        name.focus();
        return;
      }

      if (!phoneValue) {
        alert('Пожалуйста, укажите номер телефона');
        phone.focus();
        return;
      }

      if (!isValidPhone(phoneValue)) {
        alert('Пожалуйста, введите корректный номер телефона (+375 XX XXX-XX-XX)');
        phone.focus();
        return;
      }

      if (emailValue && !isValidEmail(emailValue)) {
        alert('Пожалуйста, введите корректный email');
        email.focus();
        return;
      }

      // Prepare data
      const submissionData = {
        name: nameValue,
        phone: phoneValue,
        email: emailValue,
        message: messageValue,
        project: 'ЖК Маяк Минска',
        timestamp: new Date().toISOString(),
        source: window.location.pathname
      };

      // Submit
      const submitBtn = form.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;

      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Отправляем...';

      try {
        const saved = await saveFormData(submissionData);

        if (saved) {
          alert('Спасибо! Мы получили вашу заявку и свяжемся с вами в ближайшее время.');
          form.reset();
        } else {
          alert('Спасибо! Заявка сохранена. Мы свяжемся с вами в ближайшее время.');
          form.reset();
        }
      } catch (error) {
        console.error('Form submission error:', error);
        alert('Произошла ошибка при отправке. Попробуйте еще раз.');
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
      }
    });

    // Phone validation
    function isValidPhone(phone) {
      const phoneRegex = /^[\+]?[0-9\s\-\(\)]{10,}$/;
      return phoneRegex.test(phone.replace(/\s/g, ''));
    }

    // Email validation
    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    // Save form data to server
    async function saveFormData(data) {
      try {
        const response = await fetch('/api/submit-form.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });

        return response.ok;
      } catch (error) {
        saveToLocalStorage(data);
        return false;
      }
    }

    // Save to localStorage as fallback
    function saveToLocalStorage(data) {
      try {
        const existingForms = JSON.parse(localStorage.getItem('pendingForms') || '[]');
        existingForms.push(data);
        localStorage.setItem('pendingForms', JSON.stringify(existingForms));
      } catch (error) {
        console.error('localStorage save failed:', error);
      }
    }
  </script>
</body>
</html>

